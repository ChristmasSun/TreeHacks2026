--- MANIM COMMUNITY v0.19.2 CHEAT SHEET ---

### 1. Minimal Scene Template
```python
from manim import *

class MyScene(Scene):
    def construct(self):
        self.camera.background_color = "#000000"
```

### 2. Text and Math (Safe Usage)
*   Prose/captions: `Text("...")`
*   Short formulas: `MathTex(r"E = mc^2")`
*   Keep formulas modular: split large expressions into smaller `MathTex` objects if you need per-part animation.
*   Prefer `Text` for long sentences and narration-aligned labels.
*   Use `\frac{a}{b}` for fractions, NEVER `{a \over b}` (the TeX primitive `\over` can cause rendering issues).

### 3. Matrix Rendering (Preferred)
*   Use `Matrix([["a", "b"], ["c", "d"]])` for standard matrices.
*   Use `MobjectMatrix([[MathTex("a_{11}"), ...], ...])` when you need precise element-level control.
*   Avoid fragile raw multi-line LaTeX matrix strings unless absolutely necessary.

### 4. LaTeX Coloring Rules (Critical)
*   Avoid single-character `tex_to_color_map` keys like `{"a": BLUE, "i": YELLOW, "n": RED}`.
*   These can break LaTeX command tokens (`\\begin`, `\\end`, `\\in`, `\\times`).
*   Only use exact token mappings such as:
    *   `tex_to_color_map={"a_{11}": BLUE, "c_{ij}": YELLOW}`
*   If in doubt, create separate mobjects and color them directly (`obj.set_color(...)`).

### 5. Selecting Math Parts Safely
*   `get_part_by_tex` / `get_parts_by_tex` can be fragile on complex expressions.
*   Prefer deterministic structure:
    *   separate terms into separate `MathTex` objects,
    *   group with `VGroup`,
    *   animate specific child mobjects directly.

### 6. Layout and Anti-Overlap (CRITICAL)
*   Use zones:
    *   title: `.to_edge(UP, buff=0.5)`
    *   caption: `.to_edge(DOWN, buff=0.5)`
    *   main visuals: center
*   Use spacing everywhere:
    *   `.next_to(..., buff=0.5)`
    *   `.arrange(..., buff=0.4)`
    *   `.to_edge(..., buff=0.5)`
*   **Strict limit: max 3 objects visible** (title + caption + one center element). Count everything.
*   **Before adding ANY new center element, `FadeOut` or `Transform` the current one.**
*   Correct pattern for stepping through multiple equations:
```python
eq1 = MathTex(r"y = x^2")
self.play(Write(eq1))
self.wait(1)
eq2 = MathTex(r"y' = 2x")
self.play(ReplacementTransform(eq1, eq2))  # eq1 is gone, eq2 replaces it
self.wait(1)
```
*   **Wrong** (causes overlap):
```python
eq1 = MathTex(r"y = x^2")
self.play(Write(eq1))
eq2 = MathTex(r"y' = 2x").next_to(eq1, DOWN)
self.play(Write(eq2))  # BAD: eq1 is still visible, now 2 equations in center
```
*   When switching from a graph/diagram to equations: `FadeOut` the graph first.
*   `SurroundingRectangle`, `Arrow`, `Brace`: always `FadeOut` within 1-2 beats.

### 7. Core Animation Primitives
*   Create/reveal: `Create`, `Write`, `FadeIn`, `DrawBorderThenFill`
*   Remove: `FadeOut`
*   Transform: `Transform`, `ReplacementTransform`, `TransformMatchingTex`
*   Emphasis: `Indicate`, `Circumscribe`, `Wiggle`, `SurroundingRectangle`
*   Timing: `self.play(..., run_time=...)`, `self.wait(...)`

### 8. Staggering and Groups
*   Safe pattern:
```python
self.play(LaggedStart(*[Create(m) for m in group], lag_ratio=0.15))
```
*   Avoid ambiguous `LaggedStartMap` argument patterns that can cause runtime type errors.

### 9. Graphing and Coordinates
```python
axes = Axes(x_range=(0, 10, 1), y_range=(-2, 2, 0.5), x_length=10, y_length=5)
curve = axes.plot(lambda x: np.sin(x), color=BLUE)
dot = Dot(color=YELLOW).move_to(axes.c2p(3, np.sin(3)))
```
*   Use `axes.c2p(x, y)` for coordinate placement.
*   Use `NumberPlane(...)` for a visible grid.

### 10. Common Pitfalls to Avoid
*   Do not use deprecated APIs (`ShowCreation`, `GraphScene`, CONFIG dict style).
*   Keep class discovery simple: define exactly one explicit `Scene` subclass.
*   Prefer deterministic object names and linear animation flow.
*   Verify every created object is actually added or animated.
